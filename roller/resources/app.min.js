!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){function b(a){return a.match("dFS")&&(a=a.replace("dFS","d6!-d6!")),a=f(a),a=g(a)}var c={dice:b(a)};Object.defineProperties(this,{getPool:{value:e.bind(c),emunerable:!0}})}function e(){return this.dice}function f(a){var b=[],c=[];for(a=a.split(/([-+v^r!act\(\)])/),a=a.filter(function(a,b,c){var d=!0;return 0===b&&""===a?!1:(""===a&&(")"===c[b-1]||"a"===c[b-1]||"c"===c[b-1]?d=!1:"("===c[b+1]&&(d=!1,c[b-1].match(/[v^r!tca]/)&&(d=!0))),d)}),a.forEach(function(a,d,e){var f={r:5,"!":4,v:3,"^":3,t:2,"+":1,"-":1};if(a.match(/-/)&&1===a.length&&(e[d+1]=a+e[d+1]),a.match(/[-+v^r!act\(\)]/)&&1===a.length){var g=f[a],h=f[c[0]];if(")"===a)for(var i=!0;i;)"("!==c[0]&&(b.push(c.shift()),"("===c[0]&&(c.shift(),i=!1));else"a"===a||"c"===a?c[0]+=a:h>g&&"("!==a?(b.push(c.shift()),c.unshift(a)):c.unshift(a)}else b.push(a)});c.length;)b.push(c.shift());return b}function g(a){var b,c={},d=0,e=[];for(b=a.filter(function(a){return a.match(/d/)});a.length;)a[0].match(/[v^r!tca+]/)||"-"===a[0]&&1===a[0].length?d+2===e.length||"+"===a[0]||"-"===a[0]?(e.push(j(a.shift(),e.pop(),e.pop())),d>=e.length&&(d=e.length-1)):e[d]=j(a.shift(),e.pop(),e[d]):(t=h(a.shift()),e.push(t),Array.isArray(t)&&(d=e.length-1));return e[0].forEach(function(a,b,d){if("object"==typeof a){var e=a.getNote();e in c?c[e].push(a):c[e]=[a]}else"number"==typeof a?(d[b]=new s("+",0),d[b].setValue(a),a=d[b],"+"in c?c["+"].push(a):c["+"]=[a]):c.Success=a.replace(/[sb]/g,"")}),"Success"in c||(c.Total=r(e[0])),c}function h(a){var b,c,d=[];if(/\d*d\d+/.test(a))roll=a.split("d"),b=isNaN(parseInt(roll[0]))?1:Math.abs(roll[0]),c=parseInt(roll[1]);else if(/\d*d%/.test(a))b=2,c=10;else{if(!/\d*dF/.test(a))return parseInt(a);roll=a.split("d"),b=isNaN(parseInt(roll[0]))?1:Math.abs(roll[0]),c=6}for(;d.length<b;)d.push(new s(a,c));return i(a,d),d}function i(a,b){if(b.forEach(function(a){a.roll()}),/\d*d%/.test(a)){var c=0;b.forEach(function(a){a.setValue(a.getValue()-1)}),b[0].setValue(10*b[0].getValue()),b.forEach(function(a){c+=a.getValue()}),0===c&&(c=100),b=c}else if(/\d*dF/.test(a)){var d=0;b.forEach(function(a){var b=a.getValue();2===b||3===b?a.setValue(-1):4===b||6===b?a.setValue(0):1!==b&&5!==b||a.setValue(1),d+=a.getValue()}),b=d}return b}function j(a,b,c){var d;switch(a){case"r":d=k(b,c);break;case"!":d=l(b,c);break;case"v":d=m(b,c);break;case"^":d=n(b,c);break;case"t":case"ta":case"tc":case"tac":case"tca":d=o(a,b,c);break;case"+":d=p(b,c);break;case"-":d=q(b,c)}return d}function k(a,b){a=isNaN(a)?1:a;for(var c,d=0;;)if("object"==typeof b[d]||void 0===b[d]){if(d>=b.length)break;if(c=b[d].getSize(),a!==c){if(b[d].getValue()<=a){var e=new s(b[d].getNote(),c);e.roll(),b[d].inValid("r"),b.splice(d+1,0,e)}d++}}else d++;return b}function l(a,b){a=isNaN(a)?-1:a;for(var c,d,e=0;;)if("object"==typeof b[e]||void 0===b[e]){if(e>=b.length)break;if(1===a)break;if(c=b[e].getSize(),d=-1===a?c:a,!isNaN(b[e].getValue())&&b[e].getValue()>=d){var f=new s(b[e].getNote(),c);f.roll(),b.splice(e+1,0,f)}e++}else e++;return b}function m(a,b){a=isNaN(a)?-1:a;var c,d,e,f,g,h,i=[];if(b.forEach(function(a,b){isNaN(a.getValue())||i.push(b)}),!i.length)return b;for(h=-1===a?1:a,d=0;h>d&&!(0>h);d++){for(e=b[i[0]].getValue(),f=i[0],g=0,c=0;c<i.length;c++)b[i[c]].getValue()<e&&(e=b[i[c]].getValue(),f=i[c],g=c);b[f].inValid("dl"),i.splice(g,1)}return b}function n(a,b){a=isNaN(a)?-1:a;var c,d,e,f,g,h,i=[];if(b.forEach(function(a,b){isNaN(a.getValue())||i.push(b)}),!i.length)return b;for(h=-1===a?1:a,d=0;h>d&&!(0>h);d++){for(e=b[i[0]].getValue(),f=i[0],g=0,c=0;c<i.length;c++)b[i[c]].getValue()>e&&(e=b[i[c]].getValue(),f=i[c],g=c);b[f].inValid("dh"),i.splice(g,1)}return b}function o(a,b,c){var d=0,e=!!a.match(/c/),f=!!a.match(/a/);return c.forEach(function(a){var c=isNaN(b)?-1:b;-1===c&&(c=a.getSize()),a.getValue()>=c&&(d++,a.getValue()===a.getSize()&&f&&d++),1===a.getValue()&&e&&d--}),d=0>d?"b"+d:d,c.push("s"+d),c}function p(a,b){return[].concat.apply([],[b,a])}function q(a,b){return"object"==typeof a&&a.forEach(function(a){"object"==typeof a&&a.getNote().match(/-/)&&a.getValue()>0&&a.setValue(-1*a.getValue())}),p(a,b)}function r(a){var b=0;return a.forEach(function(a,c,d){"number"==typeof a.getValue()&&(b+=a.getValue())}),b}var s=a("./Die.js");b.exports=d},{"./Die.js":2}],2:[function(a,b,c){function d(a,b){var c={note:a,sides:b,value:0};Object.defineProperties(this,{getNote:{value:e.bind(c),emunerable:!0},getValue:{value:f.bind(c),emunerable:!0},getSize:{value:g.bind(c),emunerable:!0},inValid:{value:h.bind(c),emunerable:!0},setValue:{value:i.bind(c),emunerable:!0},roll:{value:j.bind(c),emunerable:!0}})}function e(){return this.note}function f(){return this.value}function g(){return this.sides}function h(a){this.value=a+this.value}function i(a){this.value=a}function j(){this.value=Math.floor(Math.random()*this.sides+1)}b.exports=d},{}],3:[function(a,b,c){function d(){function b(){function a(a){utils.deleteRoll(a.target)}function b(a){utils.fillInput(a.target)}var c=document.querySelector("template.save"),d=document.querySelector("ul.saved");for(var e in m.saved){var f=document.importNode(c.content,!0);d.appendChild(f),f=d.lastElementChild,f.firstElementChild.addEventListener("click",a),f.lastElementChild.textContent=e,f.addEventListener("dblclick",b)}}function c(a){var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.href=a;var c=document.getElementsByTagName("title")[0];c.parentNode.insertBefore(b,c)}function d(a){a=a?"."+a:"body","body"===a&&(document.querySelector("title").innerHTML="Dice Roller",l()),a=document.querySelector(a),g(a),h()}function g(c){var d=a("./templates"),e=Object.keys(d);e.forEach(function(a){var b=document.createElement("template");b.innerHTML=d[a].join("\n"),"game"===a?c.appendChild(document.importNode(b.content,!0)):(b.className=a,c.appendChild(b))}),document.querySelector("input").addEventListener("focus",function(a){a.target.select()}),j(document.querySelector(".save")),b()}function h(){document.addEventListener("keydown",function(a){112===a.which&&a.preventDefault()}),document.addEventListener("keyup",function(a){13===a.which?utils.getResult():27===a.which?utils.clearResult():112===a.which&&k()}),document.querySelector(".roll").addEventListener("keyup",function(a){57===a.which&&i(a.target)})}function i(a){var b=a.selectionStart,c=a.selectionEnd;a.value+=")",a.setSelectionRange(b,c)}function j(a){a.addEventListener("click",function(){utils.saveRoll()})}function k(){var a=document.querySelector(".contain");if(1===document.querySelectorAll(".help").length){var b=document.importNode(document.querySelector("template.help").content,!0);a.appendChild(b),b=document.querySelector(".helpBlur"),b.className="helpBlur help"}else a.removeChild(a.lastElementChild)}function l(){var a=document.createElement("link");a.rel="icon",a.type="image/x-icon",a.href="./img/favicon.ico";var b=document.getElementsByTagName("title")[0];b.parentNode.insertBefore(a,b)}var m={saved:localStorage.savedRolls?JSON.parse(localStorage.savedRolls):{},buildGUI:d,loadStyles:c};utils=new f,Object.defineProperties(this,{init:{value:e.bind(m),emunerable:!0}})}function e(a){this.loadStyles("css/roller.css"),window.location.hash="roll",this.buildGUI(a)}var f=(a("./DicePool.js"),a("./Utils.js"));window.Roller=d},{"./DicePool.js":1,"./Utils.js":4,"./templates":5}],4:[function(a,b,c){function d(){function a(){var a=document.querySelector(".roll").value,c=a.split("d");return c.length>1?a:b.error}var b={error:"Check Input",saved:localStorage.savedRolls?JSON.parse(localStorage.savedRolls):{},grabText:a,getResult:e};Object.defineProperties(this,{"private":b,getResult:{value:e.bind(b),emunerable:!0},clearResult:{value:f.bind(b),emunerable:!0},saveRoll:{value:g.bind(b),emunerable:!0},deleteRoll:{value:h.bind(b),emunerable:!0},formatResult:{value:j.bind(b),emunerable:!0},grabtext:{value:a.bind(b),emunerable:!0},fillInput:{value:k.bind(b),emunerable:!0}})}function e(){var a=this.grabText();if(a!==this.error){dice=new l(a),dice=dice.getPool(),document.querySelector(".result").innerHTML=j(dice);var b=document.createElement("button");b.textContent="Clear",b.addEventListener("click",f),document.querySelector(".result").appendChild(b)}else document.querySelector(".result").innerHTML=a}function f(){document.querySelector(".roll").value="",document.querySelector(".result").innerHTML=""}function g(){function a(a){h(a.target)}function b(a){k(a.target)}var c,d=!1,e=this.grabText();if(e!==this.error){var f=prompt("Enter Name For Roll",e);if(null===f)return;for(var g in this.saved)this.saved[g]===e&&(d=!0,c=g);if(d)alert("Already saved as "+c);else if(this.saved[f]&&(d=!0),this.saved[f]=e,!d){var i=document.querySelector("template.save"),j=document.querySelector("ul.saved"),l=document.importNode(i.content,!0);j.appendChild(l),l=j.lastElementChild,l.firstElementChild.addEventListener("click",a),l.lastElementChild.textContent=f,l.addEventListener("dblclick",b)}}localStorage.savedRolls=JSON.stringify(this.saved)}function h(a){var b=a.parentElement.textContent;for(var c in this.saved)"x"+c===b&&delete this.saved[c];a.parentElement.parentElement.removeChild(a.parentElement),localStorage.savedRolls=JSON.stringify(this.saved)}function j(a){var b="";for(var c in a){if(b+="<b>"+c+":</b> ",c=a[c],Array.isArray(c))for(i=0;i<c.length;i++)if(isNaN(c[i].getValue())){var d=c[i].getValue();d=d.replace(/[A-z]/g,""),b+='<span class="disabled">'+d+"</span> "}else b+=c[i].getValue()===c[i].getSize()?'<span class="max">'+c[i].getValue()+"</span> ":"<span>"+c[i].getValue()+"</span> ";else b+=c;b+="</br>"}return b}function k(a){var b=a.textContent;document.querySelector(".roll").value=this.saved[b],window.location.hash="roll",this.getResult()}var l=a("./DicePool.js");b.exports=d},{"./DicePool.js":1}],5:[function(a,b,c){b.exports={game:['<div class="contain">','<div id="roll" class="tab">','<a href="#roll">Roller</a>','<div class="roller content">','<input class="roll" type="text"></input>','<input class="save" type="button" value="Save"></input>','<div class="result"></div>',"</div>","</div>",'<div id="save" class="tab">','<a href="#save">Saves</a>','<div class="list content">','<div class="listCont">','<ul class="saved"></ul>',"</div>","</div>","</div>",'<div class="usage">',"<p>Type Roll below - Hit Enter to roll</p>","<p>Press F1 to toggle Help</p>","</div>","</div>"],save:['<li><span class="delete">X</span><span></span></li>'],help:['<div class="helpBlur">',"<div class='helpContain'>","<ul>","<li>Standard Notation is <b>NdX</b>. It can be chained <b>NdX+NdX</b>. Empty <b>N</b> will counts as an 1.</li>","<li>eg. <b>4d6</b> will roll 4 6-sided dice and <b>d6</b> will roll just 1.</li>","<li><i>Precentile dice</i> - <b>d%</b> - Rolls 2d10 dice converting them to values between 1 and 100</li>","<li><i>Fate/Fudge dice</i> - <b>NdF</b> - Rolls dice for the Fate system (-1, 0 or +1)</li>","<li><i>Feng Shui shorthand</i> - <b>dFS</b> - same as d6!-d6!</li>","<li>Roll modifiers only effect the die type they follow unless parentheses are used.</li>",'<li><i>Drop Dice</i> - <b>v[Number]</b> - Drops the lowest "number" of dice in a roll.</li>','<li><i>Keep Dice</i> - <b>^[Number]</b> - Keeps the lowest "number" of dice in a roll.</li>','<li><i>Reroll Dice</i> - <b>r[Number]</b> - Rerolls any dice that come up equal to or lower than "number."</li>','<li><i>Exploding</i> - <b>![Number]</b> - Adds an extra dice every time a die comes up as the "number" or higher.</li>','<li><i>Success-Counting</i> - <b>t[Number]</b> - Counts as successes the number of dice that land equal to or higher than "number."</li>',"<li><ul>",'<li><i>  Success-Canceling</i> - <b>c</b> - Cancels out a success every time a die lands on "1" (the minimum).</li>',"<li><i>  Bonus Successes</i> - <b>a</b> - Adds a success every time a die lands on the maximum for that dice type.</li>","</ul>","</ul></li>","</div>","</div>"]}},{}]},{},[3]);
//# sourceMappingURL=app.min.js.map