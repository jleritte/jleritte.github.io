!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("./manager.js"),f=d(e);new f["default"]},{"./manager.js":4}],2:[function(a,b,c){"use strict";function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function e(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(i){return void c(i)}return g.done?void a(h):Promise.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)})}return d("next")})}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(new TextEncoder).encode(a)}function h(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;return(new TextDecoder).decode(a)}Object.defineProperty(c,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(){var a=e(regeneratorRuntime.mark(function b(a){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.t0=Uint8Array,b.next=3,m.exportKey("raw",a);case 3:return b.t1=b.sent,b.abrupt("return",new b.t0(b.t1));case 5:case"end":return b.stop()}},b,this)}));return function(b){return a.apply(this,arguments)}}(),k=function(){var a=e(regeneratorRuntime.mark(function b(a){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,m.importKey("raw",a,"AES-GCM",!1,["encrypt","decrypt"]);case 2:return b.abrupt("return",b.sent);case 3:case"end":return b.stop()}},b,this)}));return function(b){return a.apply(this,arguments)}}(),l=crypto,m=l.subtle,n=void 0,o=void 0,p=void 0,q=function(){function a(){f(this,a)}return i(a,[{key:"random",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return l.getRandomValues(new Uint8Array(a))}},{key:"generateAESKey",value:function(){function a(){return b.apply(this,arguments)}var b=e(regeneratorRuntime.mark(function c(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);case 2:p=a.sent;case 3:case"end":return a.stop()}},c,this)}));return a}()},{key:"encrypt",value:function(){function a(a){return b.apply(this,arguments)}var b=e(regeneratorRuntime.mark(function c(a){var b,e,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return"string"==typeof a&&(a=g(a)),b=this.random(12),c.next=4,m.encrypt({name:"AES-GCM",iv:b},f,a);case 4:return e=c.sent,c.abrupt("return",[].concat(d(b),d(new Uint8Array(e))));case 6:case"end":return c.stop()}},c,this)}));return a}()},{key:"decrypt",value:function(){function a(a,c){return b.apply(this,arguments)}var b=e(regeneratorRuntime.mark(function c(a,b){var d,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.t0=Uint8Array,c.next=3,m.decrypt({name:"AES-GCM",iv:new Uint8Array(a.splice(0,12))},e,new Uint8Array(a));case 3:return c.t1=c.sent,d=new c.t0(c.t1),b&&(d=h(d)),c.abrupt("return",d);case 7:case"end":return c.stop()}},c,this)}));return a}()},{key:"createDerivedKey",value:function(){function a(a){return b.apply(this,arguments)}var b=e(regeneratorRuntime.mark(function c(a){var b;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=o||this.random(16),c.next=3,m.importKey("raw",g(a),{name:"PBKDF2"},!1,["deriveKey"]);case 3:return b=c.sent,c.next=6,m.deriveKey({name:"PBKDF2",salt:o,iterations:1e5,hash:"SHA-256"},b,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]);case 6:n=c.sent;case 7:case"end":return c.stop()}},c,this)}));return a}()},{key:"packEncryptParameters",value:function(){function a(){return b.apply(this,arguments)}var b=e(regeneratorRuntime.mark(function c(){var a,b;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,j(p);case 2:return a=c.sent,c.next=5,this.encrypt(a,n);case 5:return b=c.sent,c.abrupt("return",[].concat(d(o),d(b),d(this.random(52))));case 7:case"end":return c.stop()}},c,this)}));return a}()},{key:"unpackEncryptParameters",value:function(){function a(a,c){return b.apply(this,arguments)}var b=e(regeneratorRuntime.mark(function c(a,b){var d,e,f;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=new Uint8Array(b.splice(0,16)),d=b.splice(0,60),c.next=4,this.createDerivedKey(a);case 4:return e=c.sent,c.next=7,this.decrypt(d,!1,n);case 7:return f=c.sent,c.next=10,k(f);case 10:p=c.sent;case 11:case"end":return c.stop()}},c,this)}));return a}()}]),a}();c["default"]=q},{}],3:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={apiKey:"AIzaSyAtxm88Q8sDuCdoc59knlU_RlgggkH7LR4",authDmain:"password-management-4d5cc.firebaseapp.com",databaseURL:"https://password-management-4d5cc.firebaseio.com/",storageBucket:"gs://password-management-4d5cc.appspot.com/"}},{}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(i){return void c(i)}return g.done?void a(h):Promise.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)})}return d("next")})}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(){E&&(p(E,"fadeOut"),E=void 0)}function h(){F=new B["default"].RecordList(C,D,i),G=new B["default"].RecordButtons(C,j,t,u),H=G.lastElementChild,o(F,"fadeIn")}function i(a){var b=a.target;g();var c=!0,d=!1,e=void 0;try{for(var f,h=F.children[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var i=f.value;i.classList.remove("highlight")}}catch(j){d=!0,e=j}finally{try{!c&&h["return"]&&h["return"]()}finally{if(d)throw e}}I=b.dataset.UUID,b.classList.add("highlight")}function j(){g(),I=void 0,J=void 0;var a=!0,b=!1,c=void 0;try{for(var d,e=F.children[Symbol.iterator]();!(a=(d=e.next()).done);a=!0){var f=d.value;f.classList.remove("highlight")}}catch(h){b=!0,c=h}finally{try{!a&&e["return"]&&e["return"]()}finally{if(b)throw c}}m()}function k(a){D.ids.next().done?(E=E?E:new B["default"].ErrorDiv(G,"Please Create a Record First"),o(H,"shake")):(E=E?E:new B["default"].ErrorDiv(G,"Please Select a Record"),o(a,"shake"))}function l(){r(),n();var a=Array.from(F.children).reduce(function(a,b){return b.dataset.UUID===I?b:a});D.deleteRecord(I),p(a,"fadeOut",function(a){return D.sync()}),I=void 0,J=void 0}function m(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};K&&n(0),K=new B["default"].EditRecordForm(C,a,v,n),o(K,"slideInRight")}function n(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];K&&(p(K,a?"slideOutRight":"fadeOut"),K=void 0)}function o(a,b){a.classList.toggle(b);var c=1e3*+getComputedStyle(a).animationDuration.replace("s","");setTimeout(function(c){return a.classList.toggle(b)},c)}function p(a,b,c){o(a,b);var d=1e3*+getComputedStyle(a).animationDuration.replace("s","");setTimeout(function(b){a.parentNode.removeChild(a),c&&c()},d-50)}function q(){M=new B["default"].Modal(C),o(M,"fadeIn")}function r(){p(M,"fadeOut"),M=void 0}Object.defineProperty(c,"__esModule",{value:!0});var s=function(){var a=e(regeneratorRuntime.mark(function b(){var a;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return a=L.querySelector(".password").value,b.next=3,new z["default"](a);case 3:if(b.t0=b.sent,b.t0){b.next=6;break}b.t0=void 0;case 6:if(D=b.t0){b.next=12;break}E=E?E:new B["default"].ErrorDiv(L.parentNode,"Invalid Password"),o(L,"shake"),b.next=15;break;case 12:return b.next=14,D.fill();case 14:p(L,"fadeOut",h);case 15:case"end":return b.stop()}},b,this)}));return function(){return a.apply(this,arguments)}}(),t=function(){var a=e(regeneratorRuntime.mark(function b(a){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(I){b.next=4;break}k(a.target),b.next=9;break;case 4:return g(),b.next=7,D.retrieveRecord(I);case 7:J=b.sent,m(J);case 9:case"end":return b.stop()}},b,this)}));return function(b){return a.apply(this,arguments)}}(),u=function(){var a=e(regeneratorRuntime.mark(function b(a){var c;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(I){b.next=4;break}k(a.target),b.next=10;break;case 4:return g(),b.next=7,D.retrieveRecord(I);case 7:c=b.sent,q(),new B["default"].DeleteConfirm(M,c.name,l,r);case 10:case"end":return b.stop()}},b,this)}));return function(b){return a.apply(this,arguments)}}(),v=function(){var a=e(regeneratorRuntime.mark(function b(){var a,c;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return a=Array.from(K.querySelectorAll("input")).reduce(function(a,b){return a[b.className]=b.value,a},{}),c=!J,J=J?J:new x["default"](a.name),J.name=a.name,J.userId=a.userId,J.password=a.password,b.next=7,D.addRecord(J);case 7:D.sync(),c&&(a=new B["default"].RecordHTML(F,J,i),o(a,"fadeIn")),n();case 10:case"end":return b.stop()}},b,this)}));return function(){return a.apply(this,arguments)}}(),w=a("./record.js"),x=d(w),y=a("./vault.js"),z=d(y),A=a("./ui.js"),B=d(A),C=document.body,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0,K=void 0,L=void 0,M=void 0,N=function O(){f(this,O),L=new B["default"].Login(C,{onclick:s,onkeydown:g}),o(L,"fadeIn"),window.onkeydown=function(a){switch(a.code){case"Enter":case"NumpadEnter":s()}}};c["default"]=N},{"./record.js":5,"./ui.js":6,"./vault.js":7}],5:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(){var a=(new Date).getTime(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===b?c:3&c|8).toString(16)});return b}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=new WeakMap,h=function(){function a(b){d(this,a);var c={_name:b||"",_UUID:b?e():0,_password:"",_userId:""};g.set(this,c)}return f(a,[{key:"parse",value:function(a){var b=JSON.parse(a),c=b.rId,d=b.name,e=b.pass,f=b.uId,h=g.get(this);return h._UUID=c,h._name=d,h._password=e,h._userId=f,this}},{key:"toString",value:function(){var a=g.get(this),b=a._UUID,c=a._password,d=a._name,e=a._userId;return JSON.stringify({rId:b,name:d,pass:c,uId:e})}},{key:"UUID",get:function(){return g.get(this)._UUID}},{key:"name",get:function(){return g.get(this)._name},set:function(a){g.get(this)._name=a}},{key:"password",get:function(){return g.get(this)._password},set:function(a){g.get(this)._password=a}},{key:"userId",get:function(){return g.get(this)._userId},set:function(a){g.get(this)._userId=a}}]),a}();c["default"]=h},{}],6:[function(a,b,c){"use strict";function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var g=function t(a,b,c){f(this,t);var d=document.createElement(b);for(var e in c)d[e]=c[e];return a.appendChild(d),d},h=function(a){function b(a){var c,e,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,b);var h=c=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,"div",g));return e=h,d(c,e)}return e(b,a),b}(g),i=function(a){function b(a){var c,e,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,b);var h=g.onclick,i=g.textContent,j=c=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,"button",g));return h||(j.onclick=function(a){return console.log("No Click Handler Set.",c)}),i||(j.textContent="Click Me"),e=j,d(c,e)}return e(b,a),b}(g),j=function(a){function b(a){var c,e,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,b);var h=c=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,"input",g));return e=h,d(c,e)}return e(b,a),b}(g),k=function(a){function b(a){var c,e,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,b),g.type="password";var h=c=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,g));return e=h,d(c,e)}return e(b,a),b}(j),l=function(a){function b(a,c){var e,g,h=c.onclick,j=c.onkeydown;f(this,b);var l=e=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,{className:"logForm standardSize"}));return new k(l,{onkeydown:j,className:"password",placeholder:"Password"}),new i(l,{onclick:h,textContent:"Login"}),g=l,d(e,g)}return e(b,a),b}(h),m=function(a){function b(a,c){var e;f(this,b);e=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,{className:"error",textContent:c}));return e}return e(b,a),b}(h),n=function(a){function b(a,c,e,g){var h,j;f(this,b);var k=h=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,{className:"buttons"}));return new i(k,{onclick:g,textContent:"Delete Record"}),new i(k,{onclick:e,textContent:"Edit Record"}),new i(k,{onclick:c,textContent:"Add Record"}),j=k,d(h,j)}return e(b,a),b}(h),o=function(a){function b(a,c,e){var g,h;f(this,b);var i=g=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,{className:"records"})),j=!0,k=!1,l=void 0;try{for(var m,n=c.ids[Symbol.iterator]();!(j=(m=n.next()).done);j=!0){var o=m.value;c.retrieveRecord(o).then(function(a){return new p(i,a,e)})}}catch(q){k=!0,l=q}finally{try{!j&&n["return"]&&n["return"]()}finally{if(k)throw l}}return h=i,d(g,h)}return e(b,a),b}(h),p=function(a){function b(a,c,e){var g,h;f(this,b);var i=g=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,{className:"record standardSize",textContent:c.name,onclick:e}));return i.dataset.UUID=c.UUID,h=i,d(g,h)}return e(b,a),b}(h),q=function(a){function b(a,c,e,g){var l,m,n=c.name,o=c.userId,p=c.password;f(this,b);var q=l=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,{className:"editForm"}));return new h(q,{textContent:"Record Name",title:"Required"}),new j(q,{value:n||"",placeholder:"Name",className:"name"}),new h(q,{textContent:"Password",title:"Required"}),new k(q,{value:p||"",placeholder:"Password",className:"password"}),new h(q,{textContent:"Username",title:"Optional"}),new j(q,{value:o||"",placeholder:"Username",className:"userId"}),new i(q,{className:"alt",onclick:g,textContent:"Cancel"}),new i(q,{onclick:e,textContent:"Save"}),m=q,d(l,m)}return e(b,a),b}(h),r=function(a){function b(a){var c,e;f(this,b);var g=c=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,{className:"modal"}));return e=g,d(c,e)}return e(b,a),b}(h),s=function(a){function b(a,c,e,g){var j,k;f(this,b);var l=j=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,{className:"deletePrompt"}));return new h(l,{textContent:"Are you sure you want to delete "+c+"?"}),new i(l,{className:"alt",onclick:g,textContent:"Cancel"}),new i(l,{onclick:e,textContent:"Delete"}),k=l,d(j,k)}return e(b,a),b}(h);c["default"]={Input:j,Login:l,ErrorDiv:m,RecordHTML:p,RecordList:o,RecordButtons:n,EditRecordForm:q,Modal:r,DeleteConfirm:s}},{}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(i){return void c(i)}return g.done?void a(h):Promise.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)})}return d("next")})}}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(){var a=f(regeneratorRuntime.mark(function b(a){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,r.ref("ep").once("value");case 2:if(s=b.sent,s=s.val()||[],!s.length){b.next=15;break}return b.prev=5,b.next=8,q.unpackEncryptParameters(a,[].concat(e(s)));case 8:b.next=13;break;case 10:return b.prev=10,b.t0=b["catch"](5),b.abrupt("return",!1);case 13:b.next=23;break;case 15:return b.next=17,q.createDerivedKey(a);case 17:return b.next=19,q.generateAESKey();case 19:return b.next=21,q.packEncryptParameters();case 21:s=b.sent,r.ref("ep").set(s);case 23:return b.abrupt("return",!0);case 24:case"end":return b.stop()}},b,this,[[5,10]])}));return function(b){return a.apply(this,arguments)}}(),j=a("./crypto.js"),k=d(j),l=a("./record.js"),m=d(l),n=a("./keys.js"),o=d(n),p=new Map,q=new k["default"];firebase.initializeApp(o["default"]);var r=firebase.database(),s=void 0,t=function(){function a(b){var c=this;return g(this,a),i(b).then(function(a){return a?c:null})}return h(a,[{key:"addRecord",value:function(){function a(a){return b.apply(this,arguments)}var b=f(regeneratorRuntime.mark(function c(a){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.t0=p,b.t1=a.UUID,b.next=4,q.encrypt(""+a);case 4:b.t2=b.sent,b.t0.set.call(b.t0,b.t1,b.t2);case 6:case"end":return b.stop()}},c,this)}));return a}()},{key:"deleteRecord",value:function(a){p["delete"](a)}},{key:"retrieveRecord",value:function(){function a(a){return b.apply(this,arguments)}var b=f(regeneratorRuntime.mark(function c(a){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.t0=new m["default"],b.next=3,q.decrypt([].concat(e(p.get(a))),!0);case 3:return b.t1=b.sent,b.abrupt("return",b.t0.parse.call(b.t0,b.t1));case 5:case"end":return b.stop()}},c,this)}));return a}()},{key:"fill",value:function(){function a(){return b.apply(this,arguments)}var b=f(regeneratorRuntime.mark(function c(){var a;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,r.ref("rs").once("value");case 2:a=b.sent,a.val()?a.val().map(function(a){return p.set(a[0],a[1])}):null;case 4:case"end":return b.stop()}},c,this)}));return a}()},{key:"sync",value:function(){r.ref("rs").set(Array.from(p))}},{key:"enParms",get:function(){return s}},{key:"ids",get:function(){return p.keys()}}]),a}();c["default"]=t},{"./crypto.js":2,"./keys.js":3,"./record.js":5}]},{},[1]);